{% load static %}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asignatura - Nombre del Curso</title>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="{% static 'mindforgeApp/css/style.css' %}">   
</head>

<body>
    <nav>
        <div class="left">
            <div class="logo">
                <img src="{% static 'mindforgeApp/logos/logo.jfif'  %}">
            </div>
            <div class="links">
                <a href="{% url 'home_view' %}">
                    <h2>Inicio</h2>
                </a>
                <a href="#">Sobre nosotros</a>
                <a href="#">Contacto</a>
            </div>
        </div>

        <div class="buttons">
            <a href="{% url 'perfil_view' request.user.id %}"><i class='bx bxs-user-account'></i></a>
        </div>
    </nav>

    <div class="sidebar">
        <button class="btn toggle-menu">☰ Menú</button>
        <div class="menu-items">
            <a href="{% url 'home_view' %}">Inicio</a>
            <a href="{% url 'contenidos_view' clase.id %}">Contenidos del curso</a>
            <a href="{% url 'tareas_view' clase.id %}">Tareas</a>
        </div>
    </div>

    <div class="class-content">

        <header class="class-header">
            <h1>{{ clase.nombre }}</h1>
        </header>

        {% if es_profesor %}
        <section class="add-student-btn">
            <button id="add-student-btn" class="btn" style="display: block;">Añadir Alumno</button>
            <div id="add-student-modal" class="modal hidden">
                <div class="modal-content">
                    <form id="add-student-form" action="{% url 'anyadir_alumno_view' clase.id %}" method="POST">
                        {% csrf_token %}
                        <label for="username">Nombre de usuario:</label>
                        <input type="text" id="username" name="username" required>
                    
                        <label for="email">Email:</label>
                        <input type="text" id="email" name="email" required>
                    
                        <button type="submit" class="btn">Añadir</button>
                        <button type="button" id="close-modal-btn" class="btn cancel-btn">Cancelar</button>
                    </form>                                       
                </div>
            </div>
        </section>
        {% endif %}

        <section class="materials">
            <a href="{% url 'contenidos_view' clase.id %}">
                <h2>Contenidos del Curso</h2>
            </a>
        </section>

        <section class="tasks">
            <a href="{% url 'tareas_view' clase.id  %}">
                <h2>Tareas</Em></h2>
            </a>
        </section>

        <div class="participantes">
            <a href="{% url 'participantes_view' clase.id %}">
                <h2>Participantes</h2>
            </a>
        </div>
    </div>

    <script>
        const toggleMenuButton = document.querySelector('.toggle-menu');
        const sidebar = document.querySelector('.sidebar');
        const classContent = document.querySelector('.class-content'); 

        toggleMenuButton.addEventListener('click', () => {
            sidebar.classList.toggle('active');  
            classContent.classList.toggle('pushed'); 
        });
    </script>

    <script>
        const addStudentBtn = document.getElementById('add-student-btn');
        const modal = document.getElementById('add-student-modal');
        const closeModalBtn = document.getElementById('close-modal-btn');

        addStudentBtn.addEventListener('click', () => {
            modal.classList.remove('hidden');
        });

        closeModalBtn.addEventListener('click', () => {
            modal.classList.add('hidden');
        });

        // Cierra el modal al hacer clic fuera de él
        window.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.classList.add('hidden');
            }
        });
    </script>
</body>
</html>